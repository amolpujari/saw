class AddVisitsAndHits < ActiveRecord::Migration
  def change
    create_table :track_visits do |t|
      t.integer   :user_id
      t.string    :session_id
      t.string    :user_agent
      t.string    :visit_source
      t.string    :remote_ip
      t.datetime  :created_at
    end

    add_index :track_visits, [:user_id, :session_id]
    add_index :track_visits, :user_id
    
    create_table :track_links do |t|
      t.integer   :track_visit_id
      t.string    :url
      t.string    :server_name
      t.string    :method
      t.string    :action
      t.text      :params  
      t.string    :note
      t.text      :json_data 
      t.datetime  :created_at
    end

    add_index :track_links, :track_visit_id
  end
end
